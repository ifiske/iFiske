<ion-header>
  <admin-header (back)="back()"></admin-header>

  <ion-toolbar no-border-top color="primary">
    <form action="">
      <ion-searchbar animated (ionInput)="search($event)" (keypress)="keypress($event)" [(ngModel)]="searchTerm" [ngModelOptions]="{standalone: true}"
        [placeholder]="'Search' | translate"></ion-searchbar>
    </form>
  </ion-toolbar>
</ion-header>

<ion-content class="outer-content">
  <ion-refresher (ionRefresh)="refresh($event)">
    <ion-refresher-content
      [pullingText]="'ui.general.pull_to_refresh' | translate"
      [refreshingText]="'Updating' | translate"
    ></ion-refresher-content>
  </ion-refresher>
  <ion-list *ngIf="permits?.length === 0">
    <ion-item>
      {{'errors.admin.noPermits' | translate}}
    </ion-item>
  </ion-list>
  <ion-list>
    <ng-container *ngFor="let item of permits">
    <ion-list-header *ngIf="item.title" [ngClass]="item.class" (click)="foldHeader(item)">
      <ion-icon item-start [name]="item.icon"></ion-icon>
      <span>{{item.title | translate}}: {{item.count}} {{'ui.general.shortAmount' | translate}}</span>
      <ion-icon item-end [name]="item.isFolded ? 'arrow-dropright' : 'arrow-dropdown'"></ion-icon>
    </ion-list-header>
    <ion-item *ngIf="!item.title" (click)="goto(item)">
      <h2>{{item.fullname}}</h2>
      <p>{{item.t}}</p>
      <p>{{item.tel}}</p>
      <p item-end class="code">{{item.code}}</p>
    </ion-item>
    </ng-container>
  </ion-list>

</ion-content>
