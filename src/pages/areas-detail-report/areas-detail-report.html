<ion-header>
  <tab-navbar [largeTitle]="true">{{area?.t}}</tab-navbar>
</ion-header>

<ion-content class="background-abstract">
  <ion-refresher (ionRefresh)="refresh($event)">
    <ion-refresher-content
      [pullingText]="'ui.general.pull_to_refresh' | translate"
      [refreshingText]="'Updating' | translate"
    ></ion-refresher-content>
  </ion-refresher>
  <ng-container *ngIf="reports$ | async as reports">
    <section class="no-reports" *ngIf="reports.length === 0">
      {{'ui.reports.empty' | translate}}
    </section>
    <ion-card *ngFor="let report of reports" [navPush]="'ReportDetailPage'" [navParams]="report">
      <ion-item>
        <ion-icon item-start color="primary" name="contact"></ion-icon>
        <h2>{{report.name}}</h2>
        <p>
          <ng-container *ngIf="report.area">
            {{report.area}} -
          </ng-container>
          {{report.day | date:'mediumDate'}}
        </p>
      </ion-item>
      <img *ngIf="report.img2" [src]="report.img2" />
      <ion-card-content>
        <p class="comment" *ngIf="report.obs">{{report.obs}}</p>

        <div class="catch-info">
          <p class="technique">
            <ion-icon color="primary" name="ifiske-hook"></ion-icon>
            {{(report.technique$ |async)?.t}}
          </p>

          <p class="amount">
            <ion-icon color="primary" name="ifiske-fish"></ion-icon>

            <ng-container *ngIf="!report.numberOfCatches"
              >{{'ui.reports.no_catch' | translate}}</ng-container
            >

            <ng-container *ngIf="report.numberOfCatches">
              <span>{{ report.numberOfCatches }}</span>
              <span
                >{{('ui.reports.amount.' + (report.numberOfCatches === 1 ? 'single' : 'multiple')) |
                translate}}</span
              >
            </ng-container>
          </p>
        </div>
      </ion-card-content>
    </ion-card>
  </ng-container>
</ion-content>
