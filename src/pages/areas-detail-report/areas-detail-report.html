<ion-header>
  <tab-navbar [largeTitle]="true" [button]="{icon: 'share', click: share}">
    {{area?.t}}
  </tab-navbar>
</ion-header>

<ion-content class="background-abstract">
  <ng-container *ngIf="reports$ | async as reports">
    <section class="no-reports" *ngIf="reports.length === 0">
      {{'ui.reports.empty' | translate}}
    </section>
    <section class="report" *ngFor="let report of reports">
      <div class="report-header">
        <div class="report-name">
          {{report.name}}
        </div>
        <div class="report-day">
          {{report.day | date:'mediumDate'}}
        </div>
      </div>

      <img *ngIf="report.img1" class="catch-image" [src]="report.img1" [imageViewer]="report.img2" />

      <p *ngIf="report.obs" class="box">{{report.obs}}</p>

      <div class="row tech-bait">
        <a class="box" (click)="openTechnique(report)" tappable>
          <span>{{(report.technique$ | async)?.t}}</span>
          <span>{{'ui.reports.technique' | translate}}</span>
        </a>

        <div class="box">
          <span>{{(report.bait$ | async)?.t}}</span>
          <span>{{'ui.reports.bait' | translate}}</span>
        </div>
      </div>

      <ul class="catches-list">
        <li *ngIf="!report.catches?.length" class="box">{{'ui.reports.no_catch' | translate}}</li>
        <li *ngFor="let catch of report?.catches" class="box" (click)="openFish(catch)" tappable>
          <div class="list-wrap">
            <div class="catch-fish">
              <img [icSrc]="(catch.fish$ | async)?.img" />
              <span>{{ (catch.fish$ | async)?.t }}</span>
            </div>

            <div class="row catch-info">
              <div class="catch-info-part">
                <span *ngIf="catch.num > 0">{{ catch.num }}</span>
                <span>{{('ui.reports.amount.' + (catch.num === 1 ? 'single' : 'multiple')) | translate}}</span>
              </div>
              <div class="catch-info-part">
                <ng-container *ngIf="catch.wei">
                  <span *ngFor="let str of catch.wei | weight">{{str}}</span>
                </ng-container>
              </div>
              <div class="catch-info-part">
                <ng-container *ngIf="catch.cm"><span>{{catch.cm}}</span><span>cm</span></ng-container>
              </div>
            </div>
          </div>

          <p *ngIf="catch.cmt" class="comment">{{catch.cmt}}</p>
        </li>
      </ul>
    </section>
  </ng-container>
</ion-content>
